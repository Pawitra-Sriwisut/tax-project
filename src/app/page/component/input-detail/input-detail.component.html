<form [formGroup]="formGroup1">
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-12">
                    <h5>1. Tax Filing Detail</h5>
                    <hr>
                    <label class="mt-3" [required-field]="true">Type of filing</label>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <div class="form-check form-check-inline" *ngFor="let filingType of filingTypes">
                        <input class="form-check-input" type="radio" [id]="filingType.label" [value]="filingType.value"
                            formControlName="filingType" name="filingType">
                        <label class="form-check-label" [for]="filingType.label">
                            {{ filingType.label}}
                            <span question></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 col-lg-6 mb-2">
                    <label class="mb-2" [required-field]="true"
                        *ngIf="formGroup1.controls['filingType'].value !== '1'">VAT
                        Month</label>
                    <label class="mb-2" [required-field]="true"
                        *ngIf="formGroup1.controls['filingType'].value === '1'">Tax
                        Month</label>
                    <div class="row">
                        <div class="col-12 col-lg-6 mb-2">
                            <select class="form-select" formControlName="month">
                                <option [value]="month.value" *ngFor="let month of months"
                                    [disabled]="+month.value > currentMonth">{{ month.label }}
                                </option>
                            </select>
                        </div>
                        <div class="col-12 col-lg-6">
                            <select class="form-select" formControlName="year">
                                <option [value]="year.value" *ngFor="let year of years">{{ year.label }}
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6" *ngIf="formGroup1.controls['filingType'].value === '1'">
                    <label class="mb-2" [required-field]="true">Type</label>
                    <div class="row">
                        <div class="col-12 col-lg-6">
                            <select class="form-select">
                                <option [value]="'0'" selected>On Time
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-12">
                    <div class="second-detail">
                        <h5>2. Tax Computation</h5>
                        <span style="text-decoration: underline;">View Exchange Rate</span>
                    </div>
                    <hr>
                    <label [required-field]="true" class="sub-header">Provide total value taxable
                        electronic
                        service</label>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 col-lg-8 mb-2">
                    <label *ngIf="formGroup1.controls['filingType'].value !== '1'">1. Total value of
                        taxable electronic service exclusive of VAT</label>
                    <label *ngIf="formGroup1.controls['filingType'].value === '1'">1. Underdeclared
                        Thai taxable electronic service</label>
                </div>
                <div class="col-12 col-lg-4">
                    <input number [fraction]="2" [allow-empty]="true" type="text" class="form-control"
                        formControlName="saleAmount" placeholder="THB" (blur)="onChangeSaleAmount()" />
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 col-lg-8 mb-2">
                    <label>2. Total VAT to be remitted (7% of 1.)</label>
                </div>
                <div class="col-12 col-lg-4">
                    <input number [fraction]="2" [allow-empty]="true" type="text" class="form-control"
                        [value]="model.taxAmount" placeholder="THB" (blur)="onChangeTaxAmount(taxModal, $event)" />
                </div>
            </div>
            <ng-container *ngIf="formGroup1.controls['filingType'].value === '1'">
                <div class="row mt-4">
                    <div class="col-12">
                        <label class="sub-header">
                            In case of late filing and payment, or additional filing
                        </label>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-lg-8 mb-2">
                        <label>3. Surcharge</label>
                        <span question></span>
                    </div>
                    <div class="col-12 col-lg-4">
                        <input number [fraction]="2" [allow-empty]="true" type="text" class="form-control"
                            placeholder="THB" [value]="model.surcharge" [disabled]="true" />
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-lg-8 mb-2">
                        <label>4. Penalty</label>
                        <span question></span>
                    </div>
                    <div class="col-12 col-lg-4">
                        <input number [fraction]="2" [allow-empty]="true" type="text" class="form-control"
                            placeholder="THB" [value]="model.penalty" [disabled]="true" />
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-lg-8 mb-2">
                        <label>5. Total amount of VAT, surcharge, and penalty to be remitted
                            (2.+3.+4.)</label>
                    </div>
                    <div class="col-12 col-lg-4">
                        <input number [fraction]="2" [allow-empty]="true" type="text" class="form-control"
                            placeholder="THB" [value]="model.totalAmount" [disabled]="true" />
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
    <div class="mt-4 text-center">
        <button type="button" class="btn btn-light" matStepperPrevious>Back</button>
        <button type="button" class="btn btn-primary" style="margin-left: 1rem;" matStepperNext
            (click)="onNext(mymodal)">Next</button>
    </div>
</form>

<ng-template #mymodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Error</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
            <span aria-hidden="true">x</span>
        </button>
    </div>
    <div class="modal-body">
        <span>Invalid Data</span>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close()">Ok</button>
    </div>
</ng-template>

<ng-template #taxModal let-taxModal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Error</h4>
        <button type="button" class="close" aria-label="Close" (click)="taxModal.dismiss()">
            <span aria-hidden="true">x</span>
        </button>
    </div>
    <div class="modal-body">
        <span>Invalid Tax</span>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="taxModal.close()">Ok</button>
    </div>
</ng-template>